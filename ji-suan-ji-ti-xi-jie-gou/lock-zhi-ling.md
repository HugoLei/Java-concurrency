最核心：lock 前缀指令的目的——保证原子性

---


# lock前缀指令的两种实现方式
> 来自intel手册

#### 总线锁
早起 CPU，总是采用锁总线的方式。
某个核心遇到 Lock 指令，就触发总线仲裁器，让其把总线完全分给某个核心。
其余的 CPU 核心不能再通过总线与内存通讯。
从而达到“原子性”
> 总线锁导致其他 CPU 无法工作，代价大

#### 缓存锁
>  Ringbus + MESI 协议，这种技术被称作缓存锁