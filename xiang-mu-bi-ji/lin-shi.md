# 指令序列的重排序
## 为什么要对指令进行重排序？提高性能
为了提高执行效率，提高性能。



```
举个不恰当的例子：
1. a=1
2. b=2
3. a = a + 2
```



如果按照1，2，3的顺序执行，那就是把 a 读入寄存器-赋值-写回，把 b 读入寄存器-赋值-写回，把 a 读入寄存器-加法-写回。`《a 读入寄存器发生了2次》`
可以讲执行顺序调整为1，3，2，这样的话，把 a 读入寄存器-赋值-加法-写回，把 b 读入寄存器-赋值-写回。`《a 读入寄存器发生了1次》`

## 在什么地方发生了指令重排？编译器和处理器
1. 编译器指令重排。
2. 处理器
    1. 指令级并行技术：将多条指令重叠执行。如果程序语句间无数据依赖，处理器可以改变对应的机器指令的执行顺序，进一步可能通过指令级并行技术来重叠执行多条指令。
    2. 内存系统重排序。处理器使用缓存和读写缓冲区，这使得加载和存储操作看上去可能是乱序执行。
